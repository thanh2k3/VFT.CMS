@model VFT.CMS.Client.ViewModels.Products.PagedViewModel


<div class="filter-bar d-flex flex-wrap align-items-center justify-content-between">
	<div class="sorting">
		@if (Model.StartRecord < Model.EndRecord)
		{
			<p class="text-white m-0">Hiển thị @Model.StartRecord đến @Model.EndRecord của @Model.TotalItems dòng</p>
		}
		else
		{
			<p class="text-white m-0">Hiển thị @Model.EndRecord của @Model.TotalItems dòng</p>
		}
	</div>
	<div class="sorting">
		<select id="pageSelector" asp-items="Model.GetPageSize();" onchange="ChangePageSize(this);"></select>
	</div>
	<div class="pagination">
		@if (Model.CurrentPage > 1)
		{
			<a asp-controller="Product" asp-action="Index"
			   asp-route-page="1"
			   asp-route-pageSize="@Model.PageSize"
			   asp-route-SearchText="@Model.SearchText">
				Đầu
			</a>
			<a class="prev-arrow" asp-controller="Product" asp-action="Index"
			   asp-route-page="@(Model.CurrentPage - 1)"
			   asp-route-pageSize="@Model.PageSize"
			   asp-route-SearchText="@Model.SearchText">
				<i class="fa fa-long-arrow-left" aria-hidden="true"></i>
			</a>
		}
		@for (var pge = Model.StartPage; pge <= Model.EndPage; pge++)
		{
			@if(pge != Model.CurrentPage)
			{
				<a asp-controller="Product" asp-action="Index"
				   asp-route-page="@pge"
				   asp-route-pageSize="@Model.PageSize"
				   asp-route-SearchText="@Model.SearchText">
					@pge
				</a>
			}
			else
			{
				<a class="active">@pge</a>
			}
		}
		@if (Model.CurrentPage < Model.TotalPages)
		{
			<a class="next-arrow" asp-controller="Product" asp-action="Index"
			   asp-route-page="@(Model.CurrentPage + 1)"
			   asp-route-pageSize="@Model.PageSize"
			   asp-route-SearchText="@Model.SearchText">
				<i class="fa fa-long-arrow-right" aria-hidden="true"></i>
			</a>
			<a asp-controller="Product" asp-action="Index"
			   asp-route-page="@(Model.TotalPages)"
			   asp-route-pageSize="@Model.PageSize"
			   asp-route-SearchText="@Model.SearchText">
				Cuối
			</a>
		}
	</div>
</div>

<script>
	function ChangePageSize(obj) {
		var controllerName = '@this.ViewContext.RouteData.Values["controller"].ToString()';

		window.location.href = "/" + controllerName + "/@Model.Action" + "?pageSize=" + obj.value + "&SearchText@Model.SearchText";
	}
</script>